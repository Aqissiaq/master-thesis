%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Beamer Presentation
% LaTeX Template
% Version 1.0 (10/11/12)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND THEMES
%----------------------------------------------------------------------------------------

\documentclass{beamer}

\usepackage{agda}
\usepackage{newunicodechar}

\newunicodechar{∼}{\ensuremath{\sim}}
\newunicodechar{→}{\ensuremath{\rightarrow}}
\newunicodechar{¹}{\ensuremath{^{1}}}
\newunicodechar{ℕ}{\ensuremath{\mathbb{N}}}
\newunicodechar{ℤ}{\ensuremath{\mathbb{Z}}}
\newunicodechar{Σ}{\ensuremath{\Sigma}}
\newunicodechar{Π}{\ensuremath{\Pi}}
\newunicodechar{π}{\ensuremath{\pi}}
\newunicodechar{₀}{\ensuremath{_{0}}}
\newunicodechar{₁}{\ensuremath{_{1}}}
\newunicodechar{₂}{\ensuremath{_{2}}}
\newunicodechar{∀}{\ensuremath{\forall}}
\newunicodechar{∃}{\ensuremath{\exists}}
\newunicodechar{⊥}{\ensuremath{\bot}}
\newunicodechar{∨}{\ensuremath{\lor}}
\newunicodechar{λ}{\ensuremath{\lambda}}
\newunicodechar{≡}{\ensuremath{\equiv}}
\newunicodechar{≢}{\ensuremath{\not\equiv}}
\newunicodechar{≠}{\ensuremath{\not=}}
\newunicodechar{⁻}{\ensuremath{^-}}
\newunicodechar{∎}{\ensuremath{\blacksquare}}
\newunicodechar{≃}{\ensuremath{\simeq}}
\newunicodechar{∙}{\ensuremath{\cdot}}
\newunicodechar{Ω}{\ensuremath{\Omega}}
\newunicodechar{↔}{\ensuremath{\leftrightarrow}}
\newunicodechar{∘}{\ensuremath{\circ}}
\newunicodechar{∈}{\ensuremath{\in}}
\newunicodechar{∷}{\ensuremath{::}}
\newunicodechar{ℓ}{\ensuremath{\ell}}

\usepackage{listings}
\usepackage{tikz}
\usetikzlibrary{cd}

\mode<presentation> {

% The Beamer class comes with a number of default slide themes
% which change the colors and layouts of slides. Below this is a list
% of all the themes, uncomment each in turn to see what they look like.

%\usetheme{default}
%\usetheme{AnnArbor}
%\usetheme{Antibes}
%\usetheme{Bergen}
%\usetheme{Berkeley}
%\usetheme{Berlin}
%\usetheme{Boadilla}
%\usetheme{CambridgeUS}
%\usetheme{Copenhagen}
%\usetheme{Darmstadt}
%\usetheme{Dresden}
%\usetheme{Frankfurt}
%\usetheme{Goettingen}
%\usetheme{Hannover}
%\usetheme{Ilmenau}
%\usetheme{JuanLesPins}
%\usetheme{Luebeck}
%\usetheme{Madrid}
%\usetheme{Malmoe}
%\usetheme{Marburg}
\usetheme{Montpellier}
%\usetheme{PaloAlto}
%\usetheme{Pittsburgh}
%\usetheme{Rochester}
%\usetheme{Singapore}
%\usetheme{Szeged}
%\usetheme{Warsaw}

% As well as themes, the Beamer class has a number of color themes
% for any slide theme. Uncomment each of these in turn to see how it
% changes the colors of your current slide theme.

%\usecolortheme{albatross}
%\usecolortheme{beaver}
%\usecolortheme{beetle}
%\usecolortheme{crane}
\usecolortheme{dolphin}
%\usecolortheme{dove}
%\usecolortheme{fly}
%\usecolortheme{lily}
%\usecolortheme{orchid}
%\usecolortheme{rose}
%\usecolortheme{seagull}
%\usecolortheme{seahorse}
%\usecolortheme{whale}
%\usecolortheme{wolverine}

%\setbeamertemplate{footline} % To remove the footer line in all slides uncomment this line
\setbeamertemplate{footline}[page number] % To replace the footer line in all slides with a simple slide count uncomment this line

\setbeamertemplate{navigation symbols}{} % To remove the navigation symbols from the bottom of all slides uncomment this line
}

\usepackage{graphicx} % Allows including images
\usepackage{subfig} % Allows including images
\usepackage{booktabs} % Allows the use of \toprule, \midrule and \bottomrule in tables
\usepackage[backend=biber, sorting=none]{biblatex}
\addbibresource{sources.bib}


%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------

\title[A Cubical Implementation of Homotopical Patch Theory]{A Cubical Implementation of Homotopical Patch Theory} % The short title appears at the bottom of every slide, the full title is only on the title page

\author{Åsmund Aqissiaq Arild Kløvstad} % Your name
\institute[UiB] % Your institution as it will appear on the bottom of every slide, may be shorthand to save space
{
Universitetet i Bergen \\ % Your institution for the title page
}
\date{June 23rd, 2022} % Date, can be changed to a custom date

\begin{document}

\begin{frame}
\titlepage % Print the title page as the first slide
\end{frame}

\begin{frame}
\frametitle{Overview} % Table of contents slide, comment this block out to remove it
\tableofcontents % Throughout your presentation, if you choose to use \section{} and \subsection{} commands, these will automatically be printed on this slide as an overview of your presentation
\end{frame}

%----------------------------------------------------------------------------------------
%	PRESENTATION SLIDES
%----------------------------------------------------------------------------------------

% do all this in Agda syntax, we don't need translation
\section{Homotopy Type Theory}
\include{latex/hott}
\include{latex/cubical}

\begin{frame}
\frametitle{Groupoids}
\begin{itemize}
\item $\neg$UIP
\item Groupoids (Hofman \& Streicher '98)
  \begin{itemize}
    \item identity (\texttt{refl})
    \item composition (transitivity)
    \item inverses (symmetry)
  \end{itemize}
\item Functions $\leftrightarrow$ functors
\end{itemize}
\end{frame}

\include{latex/HITs}

% putting this here to avoid a double ToC before HoTT
\AtBeginSection[]
{
    \begin{frame}
        \tableofcontents[currentsection]
    \end{frame}
} 

\section{Version Control Systems}
\begin{frame}[fragile]
  \frametitle{Setup}
  % contexts, patches, laws?
  \begin{columns}
  \begin{column}{.5\textwidth}
  \begin{itemize}
    \item Contexts
    \item Patches
    \item Patch operations
    \item Patch laws
    \item Patch \emph{theories}
  \end{itemize}
  \end{column}
  \begin{column}{.5\textwidth}
\begin{tikzcd}
                                                                              &    &                                                                               & C \\
A \arrow[rr, "^A P ^B"] \arrow[rrrd, "^A (P \cdot R)^D"', dashed, bend right] &
& B \arrow[ru, "^B Q ^C"] \arrow[rd, "^B R ^D"] \arrow[ld, shorten <=7pt,
shorten >=7pt, Rightarrow, no head, "comp"] &   \\
                                                                              & {} &                                                                               & D
\end{tikzcd}
\end{column}
\end{columns}
\end{frame}

\begin{frame}
  \frametitle{Groupoid Structure}
  \begin{itemize}
  \item Identity
  \item Composition
  \item Inverses
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Homotopical Patch Theory (Angiuli, Morehouse, Licata, Harper 2014)}
  Take advantage of types' groupoid structure
  \vfill{}
  \begin{tabular}{l | l | l}
    VCS & HoTT &\\
    \hline
    patch theory & HIT & \texttt{R} \\
    context & term & \texttt{doc : R} \\
    patch & path & \texttt{swap : doc ≡ doc} \\
    patch law & higher-order path & \texttt{twice : swap ∙ swap ≡ refl} \\
    model & function & \texttt{Interp : R → Type}
  \end{tabular}
\end{frame}


% make clear: ideas are 100% angiuli et al, implementation is ''mine''
\section{Three Homotopical Patch Theories}

\subsection{1. An Elementary Patch Theory}
\include{latex/elementary}

\subsection{2. A Patch Theory with laws}
\include{latex/laws}

\subsection{3. A Patch Theory with Richer Contexts}
\include{latex/richer}

\section{Computations and Challenges}

\begin{frame}
  \frametitle{Setup}
  \begin{itemize}
  \item with laws
    
    \includegraphics[width=.6\textwidth]{figures/laws-setup}
  \item with richer contexts
    \includegraphics[width=\textwidth]{figures/richer-setup}
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{transp}
  \begin{itemize}
  \item with laws
    
    \includegraphics[width=.7\textwidth]{figures/laws-transportRefl}
  \item with richer contexts
    \includegraphics[width=.7\textwidth]{figures/richer-transportRefl}
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{hcomp}
  \begin{itemize}
  \item with laws
    
    \includegraphics[width=.8\textwidth]{figures/laws-hcomp}
  \item with richer contexts
    \includegraphics[width=.8\textwidth]{figures/richer-hcomp}
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{The Curious Case of \texttt{opt}}
  \includegraphics[width=\textwidth]{figures/optimizer}
\end{frame}

\begin{frame}
  \frametitle{The \texttt{indep} Patch Law}
  \begin{columns}
    \begin{column}{.4\textwidth}
      \begin{itemize}
      \item The program and prove approach relies on contractibility
      \item \texttt{noop}-``trick'' (from set-truncation elimination rule)
      \item Non-terminating on \texttt{indep}
      \end{itemize}
    \end{column}
    \begin{column}{.6\textwidth}
      \includegraphics[width=\textwidth]{figures/laws}

      \vfill{}

      \includegraphics[width=\textwidth]{figures/opt-trick}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}[fragile, allowframebreaks]
  \frametitle{Another Approach}
  \begin{itemize}
  \item Coequalizers
  \item Binary path induction
  \end{itemize}
  \begin{array}[t]{l}
      ... \\
      \{x : A\} \rightarrow (p : [ a0 ] ≡ [ \ast ]) \rightarrow\\
      \{c : Maybe\} \rightarrow (q : [ a0 ] ≡ [ c ]) → P~p~q\\
        \simeq (\{c : Maybe\} (q : [ a0 ] ≡ [ c ]) \rightarrow P~(p \cdot \operatorname{sett}~x)~q))\\
      \hline
      (p : [ a0 ] ≡ [ b ]) \rightarrow (q : [ a0 ] ≡ [ c ]) → P~p~q
  \end{array}
  \newpage
  \centering{}
  \begin{tikzcd}
  && z \arrow[ld, "p"'] \arrow[rd, "q"] &&\\
  & {[*]} \arrow[rd, dashed] \arrow[ld, "\operatorname{sett}~x"'] && y \arrow[ld, dashed] \arrow[rd, dashed] &\\
  {[x]} \arrow[rrdd, dashed] && n && {y} \arrow[lldd, dashed] \\
  &&  \rotatebox[origin=c]{270}{$\simeq$} &&\\
  && n'&&                       
  \end{tikzcd}
\end{frame}

\begin{frame}
  \frametitle{Closing Thoughts}
  \begin{itemize}
  \item Formalization with HITs and ua in Cubical Agda is fairly
    straight-forward
  \item transp/hcomp over inductive families is a hurdle
  \item Future work
    \begin{itemize}
    \item More laws
    \item Program \emph{then} prove?
    \item Investigate \texttt{optimize}
    \item Directed paths?
    \end{itemize}
  \end{itemize}
\end{frame}

\end{document} 